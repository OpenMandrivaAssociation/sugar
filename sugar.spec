# NOTE: Do not edit, file was generated by jhconvert

Name: sugar
Version: 0.83.7
Release: %mkrel 2
Summary: Sugar window manager
License: GPL/LGPL
Group: Graphical desktop/Other
Url: http://sugarlabs.org/

Source: http://download.sugarlabs.org/sources/sucrose/glucose/sugar/sugar-0.83.7.tar.bz2

Patch: sugar-0.83.7-sugar-start-script.patch
Patch1: sugar-0.83.7-sugar-logout-forever.patch

Requires: dbus-x11  
Requires: sugar-toolkit >= 0.83.6
Requires: openssh  
Requires: sugar-artwork >= 0.83.4
Requires: python-gtksourceview  
Requires: xdpyinfo  
Requires: pygtk2.0  
Requires: GConf2  
Requires: matchbox-window-manager  
Requires: gstreamer0.10-python  
Requires: dbus  
Requires: gtk+2  
Requires: python  
Requires: gstreamer0.10-plugins-base  
Requires: python-cjson  
Requires: hal  
Requires: python-numpy  
Requires: gnome-python-desktop  

BuildRequires: intltool >= 0.33
BuildRequires: pygtk2.0-devel  
BuildRequires: libGConf2-devel  
BuildRequires: libgtk+2-devel  
BuildRequires: libpython-devel  
BuildRequires: gettext  
BuildRequires: perl-XML-Parser  

BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

%description
This package contains the base modules for Sugar.
Sugar is a graphical user interface aimed at children which promotes sharing
and collaborative learning. It was introduced on the One Laptop Per Child
(OLPC) XO laptop but is useful on other devices as well.

%package emulator
Summary: The emulator for the Sugar Desktop Environment
Group: Graphical desktop/Other
Requires: %{name} = %{version}-%{release}
Requires: x11-server-xephyr
%description emulator
This package contains the Sugar emulator. It is using Xephyr
to run a Sugar environment similar to what is on the XO laptop. 

%prep
%setup -q -n sugar-0.83.7
%patch -p1
%patch1 -p1

%build
%configure 
make 

%install
rm -rf %{buildroot}
make  \
	DESTDIR=%{buildroot} \
	install
%find_lang sugar

install -d -m 0755 %{buildroot}/%{_sysconfdir}/X11/wmsession.d/
cat <<__EOF__ > %{buildroot}/%{_sysconfdir}/X11/wmsession.d/08sugar
NAME=Sugar
ICON=%{_datadir}/sugar/data/icons/module-about_me.svg
DESC=Sugar window manager
EXEC=%{_bindir}/sugar
SCRIPT:
exec %{_bindir}/sugar
__EOF__

%clean
rm -rf %{buildroot}

%files -f sugar.lang
%defattr(-,root,root,-)
%dir %{_datadir}/sugar
%config(noreplace) %{_sysconfdir}/X11/wmsession.d/*
%config(noreplace) %{_sysconfdir}/dbus*/system.d/*
%config(noreplace) %{_sysconfdir}/gconf/schemas/*
%{_bindir}/*
%exclude %{_bindir}/sugar-emulator
%{python_sitelib}/*
%{_datadir}/sugar/*
%{_datadir}/mime/packages/*
%{_datadir}/xsessions/sugar.desktop
%doc AUTHORS COPYING README

%files emulator
%defattr(-,root,root,-)
%{_bindir}/sugar-emulator

